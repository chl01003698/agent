webpackJsonp([10],{inNF:function(t,n,e){"use strict";function o(t){e("pnlf")}Object.defineProperty(n,"__esModule",{value:!0});var a=e("7+uW"),c=e("ABCa"),s=e("XYix"),i=e("2sLL"),r=e("3Lt7"),A=e("YxJB"),d=e("/0UN"),l=e("hGvq"),p=e("oVYx"),h=e("pDNl"),u=e("rHil"),C=e("UNGY"),f=e("yD8N"),g=e("3BeM"),k=e("ODCk"),m=e.n(k),x=e("M9A7"),B=e("Dod7"),v=e("M4fF"),b=e.n(v),E=e("08a9"),_=e.n(E);a.a.use(p.a),a.a.use(f.a),a.a.use(g.a);var y={name:"stock-history",components:{XHeader:c.a,Masker:s.a,XButton:i.a,FlexboxItem:r.a,Flexbox:A.a,Checker:d.a,CheckerItem:l.a,DatetimePlugin:p.a,XInput:h.a,Group:u.a,Datetime:C.a,PullTo:_.a,dateFormat:m.a},data:function(){return{screenType:-1,count:0,loadCount:0,page:1,checkDate:"",notLoadAll:!0,typeName:["进货","奖励","转入","转出"],actionName:["进货","奖励","转入","转出"],screenDate:"",list:[],dataList:[],stock:0}},methods:{change:function(t){this.checkDate=t,this.screenDate=t,this.dataList=[],this.notLoadAll=!0,this.fetchList(!1,"No")},fetchList:function(t,n,e){var o=this,a="/api/v1/stocklist/?limit=5&type="+this.screenType+"&page="+this.page;this.checkDate&&(a+="&date="+this.checkDate),t=t||a,n=n||"No",B.b(t,null,function(t){var a=t.data,c=a.msg||a.error||"请求失败";if(0!==a.code)return o.$vux.toast.text(c,"middle"),!1;var s=a.data.list;o.dataList="Yes"===n?o.dataList.concat(s):s,o.count=a.data.count,o.dataList.forEach(function(t){t.createdAtDate=m()(new Date(t.createdAt),"YYYY-MM-DD HH:mm:ss"),t.createdAt=t.createdAt.substring(0,10)}),o.count===o.dataList.length?(o.notLoadAll=!1,o.$vux.toast.text("全部加载完成","middle")):o.notLoadAll=!0,o.list=b.a.groupBy(o.dataList,function(t){return t.createdAt}),"Yes"===n&&e("done")},function(t){console.log(t)},"GET")},loadmore:function(t){var n="/api/v1/stocklist/?limit=5&type="+this.screenType+"&page="+(this.page+1);this.fetchList(n,"Yes",t)},stateChange:function(t){"pull"===t||"trigger"===t?this.iconLink="#icon-arrow-bottom":"loading"===t?this.iconLink="#icon-loading":"loaded-done"===t&&(this.iconLink="#icon-finish")},checkTypeAction:function(t,n){this.screenType=t,this.fetchList()},jumpTurnCard:function(){this.$router.push("/index/customer")}},created:function(){var t=this;Object(x.a)(this),this.fetchList(),B.b("/api/v1/agents/userinfo",null,function(n){var e=n.data;t.stock=e.coin.stock},function(t){console.log(t)},"GET")}},D=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticStyle:{width:"100%",height:"100%","padding-top":"46px","box-sizing":"border-box",overflow:"hidden"}},[e("x-header",{staticStyle:{"z-index":"100",position:"absolute",width:"100%",top:"0",left:"0"}},[t._v("进货历史")]),t._v(" "),e("pull-to",{attrs:{"bottom-load-method":t.loadmore,"is-top-bounce":!1,"is-bottom-bounce":t.notLoadAll},on:{"bottom-state-change":t.stateChange}},[e("div",{staticClass:"card-box"},[e("span",[e("router-link",{attrs:{to:"/in_stock"}},[t._v("进货")]),t._v(" "),e("a",{on:{click:t.jumpTurnCard}},[t._v("转卡")])],1),t._v(" "),e("div",{staticClass:"stock-info"},[e("h3",[t._v(t._s(t.stock))]),t._v(" "),e("span",[t._v("库存桌卡数")])])]),t._v(" "),e("flexbox",{staticClass:"screenWrap",staticStyle:{"box-sizing":"border-box"}},[e("flexbox-item",{attrs:{span:4}},[e("datetime",{staticStyle:{"font-size":"12px"},attrs:{format:"YYYY-MM"},on:{"on-change":t.change},model:{value:t.checkDate,callback:function(n){t.checkDate=n},expression:"checkDate"}},[e("span",[t._v("日期："+t._s(t.checkDate||"选择日期"))])])],1),t._v(" "),e("flexbox-item",{attrs:{span:8}},[e("checker",{attrs:{type:"radio","radio-required":"","default-item-class":"type","selected-item-class":"type-checked"},model:{value:t.screenType,callback:function(n){t.screenType=n},expression:"screenType"}},[e("checker-item",{attrs:{value:-1},on:{"on-item-click":t.checkTypeAction}},[t._v("全部")]),t._v(" "),e("checker-item",{attrs:{value:0},on:{"on-item-click":t.checkTypeAction}},[t._v("进货")]),t._v(" "),e("checker-item",{attrs:{value:1},on:{"on-item-click":t.checkTypeAction}},[t._v("奖励")]),t._v(" "),e("checker-item",{attrs:{value:2},on:{"on-item-click":t.checkTypeAction}},[t._v("转入")]),t._v(" "),e("checker-item",{attrs:{value:3},on:{"on-item-click":t.checkTypeAction}},[t._v("转出")])],1)],1)],1),t._v(" "),t._l(t.list,function(n,o){return"{}"!==JSON.stringify(t.list)?e("dl",{staticClass:"stock-item"},[e("dt",{staticClass:"stock-timeframe"},[t._v(t._s(o))]),t._v(" "),e("dd",{staticClass:"stock-list"},[e("ul",t._l(n,function(n){return e("li",{staticClass:"stock-record"},[e("strong",{staticClass:"transform-cash",class:{red:3!==n.type,green:3===n.type}},[t._v(t._s(n.changeStock))]),t._v(" "),e("p",[e("strong",{class:{red:3!==n.type,green:3===n.type}},[2===n.type?e("span",[t._v(t._s(n.source.nickname))]):t._e(),t._v(" "+t._s(t.typeName[n.type])+"\n                ")]),t._v(" "),2===n.type||3===n.type?e("span",[t._v("\n                  给 "+t._s(n.target.shortId!==n.source.shortId?n.target.nickname:"自己")+" （ID:"+t._s(n.target.shortId)+"）\n                ")]):t._e()]),t._v(" "),e("span",{staticClass:"action-date"},[t._v(t._s(n.createdAtDate))])])}))])]):t._e()}),t._v(" "),"{}"===JSON.stringify(t.list)?e("p",{staticStyle:{"text-align":"center",color:"#999"}},[t._v("暂无数据")]):t._e()],2)],1)},Y=[],L={render:D,staticRenderFns:Y},z=L,T=e("VU/8"),w=o,j=T(y,z,!1,w,null,null);n.default=j.exports},pnlf:function(t,n,e){var o=e("uUjj");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e("rjj0")("b80eeef0",o,!0)},uUjj:function(t,n,e){n=t.exports=e("FZ+f")(!0),n.push([t.i,"\nhtml,\nbody,\n#app {\n  width: 100%;\n  height: 100%!important;\n  overflow: hidden;\n}\n.screenWrap {\n  font-size: 14px;\n  padding: 10px;\n}\n.type {\n  margin-right: 5px;\n  padding: 2px 5px;\n  border-radius: 3px;\n}\n.type.type-checked {\n  color: #fff;\n  background-color: #fd7651;\n}\n.stock-item .stock-timeframe {\n  padding: 5px 10px;\n  background-color: #ccc;\n  font-size: 12px;\n}\n.stock-record {\n  padding: 10px;\n  background-color: #fff;\n  border-bottom: 1px solid #eee;\n  font-size: 12px;\n  color: #333;\n}\n.stock-record .action-date {\n  font-size: 12px;\n  color: #999;\n}\n.stock-record .transform-cash {\n  float: right;\n  font-size: 14px;\n}\n.stock-record .red {\n  color: #db2929;\n}\n.stock-record .green {\n  color: forestgreen;\n}\n.card-box {\n  position: relative;\n  margin: 10px;\n  background-color: #ddd;\n  padding: 15px;\n  border-radius: 10px;\n}\n.card-box .stock-info {\n  width: 50%;\n  text-align: center;\n  font-size: 14px;\n  color: #999;\n}\n.card-box .stock-info > h3 {\n  font-size: 20px;\n  color: #333;\n}\n.card-box > span {\n  position: absolute;\n  top: 50%;\n  right: 25px;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n.card-box > span a {\n  float: right;\n  display: inline-block;\n  margin-left: 15px;\n  font-size: 18px;\n  color: #fd7651;\n}\n","",{version:3,sources:["E:/works/chess-agent-web/src/views/Customer/stockHistory.vue"],names:[],mappings:";AACA;;;EAGE,YAAY;EACZ,uBAAuB;EACvB,iBAAiB;CAClB;AACD;EACE,gBAAgB;EAChB,cAAc;CACf;AACD;EACE,kBAAkB;EAClB,iBAAiB;EACjB,mBAAmB;CACpB;AACD;EACE,YAAY;EACZ,0BAA0B;CAC3B;AACD;EACE,kBAAkB;EAClB,uBAAuB;EACvB,gBAAgB;CACjB;AACD;EACE,cAAc;EACd,uBAAuB;EACvB,8BAA8B;EAC9B,gBAAgB;EAChB,YAAY;CACb;AACD;EACE,gBAAgB;EAChB,YAAY;CACb;AACD;EACE,aAAa;EACb,gBAAgB;CACjB;AACD;EACE,eAAe;CAChB;AACD;EACE,mBAAmB;CACpB;AACD;EACE,mBAAmB;EACnB,aAAa;EACb,uBAAuB;EACvB,cAAc;EACd,oBAAoB;CACrB;AACD;EACE,WAAW;EACX,mBAAmB;EACnB,gBAAgB;EAChB,YAAY;CACb;AACD;EACE,gBAAgB;EAChB,YAAY;CACb;AACD;EACE,mBAAmB;EACnB,SAAS;EACT,YAAY;EACZ,oCAAoC;UAC5B,4BAA4B;CACrC;AACD;EACE,aAAa;EACb,sBAAsB;EACtB,kBAAkB;EAClB,gBAAgB;EAChB,eAAe;CAChB",file:"stockHistory.vue",sourcesContent:["\nhtml,\nbody,\n#app {\n  width: 100%;\n  height: 100%!important;\n  overflow: hidden;\n}\n.screenWrap {\n  font-size: 14px;\n  padding: 10px;\n}\n.type {\n  margin-right: 5px;\n  padding: 2px 5px;\n  border-radius: 3px;\n}\n.type.type-checked {\n  color: #fff;\n  background-color: #fd7651;\n}\n.stock-item .stock-timeframe {\n  padding: 5px 10px;\n  background-color: #ccc;\n  font-size: 12px;\n}\n.stock-record {\n  padding: 10px;\n  background-color: #fff;\n  border-bottom: 1px solid #eee;\n  font-size: 12px;\n  color: #333;\n}\n.stock-record .action-date {\n  font-size: 12px;\n  color: #999;\n}\n.stock-record .transform-cash {\n  float: right;\n  font-size: 14px;\n}\n.stock-record .red {\n  color: #db2929;\n}\n.stock-record .green {\n  color: forestgreen;\n}\n.card-box {\n  position: relative;\n  margin: 10px;\n  background-color: #ddd;\n  padding: 15px;\n  border-radius: 10px;\n}\n.card-box .stock-info {\n  width: 50%;\n  text-align: center;\n  font-size: 14px;\n  color: #999;\n}\n.card-box .stock-info > h3 {\n  font-size: 20px;\n  color: #333;\n}\n.card-box > span {\n  position: absolute;\n  top: 50%;\n  right: 25px;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n}\n.card-box > span a {\n  float: right;\n  display: inline-block;\n  margin-left: 15px;\n  font-size: 18px;\n  color: #fd7651;\n}\n"],sourceRoot:""}])}});
//# sourceMappingURL=10.b913c7abb032fa633428.js.map